<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" href="animate.min.css" />
    <title>Vuelingas</title>
</head>

<body>
    <div class="Izq">
        <img src="fotoAvionIzq.gif" alt="" class="ancho">
    </div>
    
    <div class="wrapper">
        <header class="wrapper ">
            <h1>Bienvenido</h1>
            <h2>A su pagina de vuelos de confianza </h2>
        </header>
        
        <main class="wrapper">
           
            <div class="caja1">
                <img src="imagenBuscador.png" alt="">
                <input class="border" type="date" id="fechaIda">
                <input class="border" type="date" id="fechaVuelta">
                <button id="buscarOferta">Buscar ofertas</button>

            </div>
            <form class="">
                <input type="range" id="presupuesto" name="presupuesto" min="0" max="2000" />
                <p>presupuesto <span id="presupuestoMoney">$$$</span></p>
            </form>
            <div class="wrapper">

                <div class="destinoCaja">
                    <p class="destino">Destino de ida<input class="cajaPais" type="" id="pais1"></p>
                    <p class="destino">Destino de vuelta<input class="cajaPais" type="" id="pais2"></p>

                </div>

                <div class="CajaDePrecio">

                    <h2>Precio final</h2>
                    <section id="precio"></section>
                </div>
            </div>
        </main>
        
    </div>

    <div class="Izq">
        <img src="fotoAvionIzq.gif" alt="" class="">
    </div>
    <script>
        var list1 = [
            "Afganistán", "Albania", "Alemania", "Andorra", "Angola", "Antigua y Barbuda", "Arabia Saudita", "Argelia", "Argentina", "Armenia", "Australia", "Austria", "Azerbaiyán", "Bahamas", "Bangladés", "Barbados", "Baréin", "Bélgica", "Belice", "Benín", "Bielorrusia", "Birmania", "Bolivia", "Bosnia y Herzegovina", "Botsuana", "Brasil", "Brunéi", "Bulgaria", "Burkina Faso", "Burundi", "Bután", "Cabo Verde", "Camboya", "Camerún", "Canadá", "Catar", "Chad", "Chile", "China", "Chipre", "Ciudad del Vaticano", "Colombia", "Comoras", "Corea del Norte", "Corea del Sur", "Costa de Marfil", "Costa Rica", "Croacia", "Cuba", "Dinamarca", "Dominica", "Ecuador", "Egipto", "El Salvador", "Emiratos Árabes Unidos", "Eritrea", "Eslovaquia", "Eslovenia", "España", "Estados Unidos", "Estonia", "Etiopía", "Filipinas", "Finlandia", "Fiyi", "Francia", "Gabón", "Gambia", "Georgia", "Ghana", "Granada", "Grecia", "Guatemala", "Guyana", "Guinea", "Guinea ecuatorial", "Guinea-Bisáu", "Haití", "Honduras", "Hungría", "India", "Indonesia", "Irak", "Irán", "Irlanda", "Islandia", "Islas Marshall", "Islas Salomón", "Israel", "Italia", "Jamaica", "Japón", "Jordania", "Kazajistán", "Kenia", "Kirguistán", "Kiribati", "Kuwait", "Laos", "Lesoto", "Letonia", "Líbano", "Liberia", "Libia", "Liechtenstein", "Lituania", "Luxemburgo", "Macedonia del Norte", "Madagascar", "Malasia", "Malaui", "Maldivas", "Maldivas", "Malta", "Marruecos", "Mauricio", "Mauritania", "México", "Micronesia", "Moldavia", "Mónaco", "Mongolia", "Montenegro", "Mozambique", "Namibia", "Nauru", "Nepal", "Nicaragua", "Níger", "Nigeria", "Noruega", "Nueva Zelanda", "Omán", "Países Bajos", "Pakistán", "Palaos", "Panamá", "Papúa Nueva Guinea", "Paraguay", "Perú", "Polonia", "Portugal", "Reino Unido", "República Centroafricana", "República Checa", "República del Congo", "República Democrática del Congo", "República Dominicana", "República Sudafricana", "Ruanda", "Rumanía", "Rusia", "Samoa", "San Cristóbal y Nieves", "San Marino", "San Vicente y las Granadinas", "Santa Lucía", "Santo Tomé y Príncipe", "Senegal", "Serbia", "Seychelles", "Sierra Leona", "Singapur", "Siria", "Somalia", "Sri Lanka", "Suazilandia", "Sudán", "Sudán del Sur", "Suecia", "Suiza", "Surinam", "Tailandia", "Tanzania", "Tayikistán", "Timor Oriental", "Togo", "Tonga", "Trinidad y Tobago", "Túnez", "Turkmenistán", "Turquía", "Tuvalu", "Ucrania", "Uganda", "Uruguay", "Uzbekistán", "Vanuatu", "Venezuela", "Vietnam", "Yemen", "Yibuti", "Zambia", "Zimbabue"
        ];
        let rangeInput = $('#presupuesto'); //global variable so i can get it in presupuesotFinal
        let pointsValue = $('#presupuestoMoney');
        $(document).ready(function () {
            // update the price between the range and 250$$
            rangeInput.on('input', function () {
                // Update value in the bar 
                pointsValue.text(rangeInput.val());
            });
        });
        $(document).ready(function () {
            $("#fechaIda").focus();
            $("#fechaVuelta").focus();

            $('#pais1').autocomplete({
                maxShowItems: 50,
                source: list1
            });
            $('#pais2').autocomplete({
                maxShowItems: 50,
                source: list1
            });

            $('#buscarOferta').click(function () {
                var pais1 = $('#pais1').val();
                var pais2 = $('#pais2').val();
                var presupuestoMoney = $('#presupuesto').val(); // Agregado para obtener el presupuesto

                // Verificar si el presupuesto está vacío
                if (presupuestoMoney === "") {
                    alert("Por favor, establezca su presupuesto antes de buscar ofertas.");
                    return; // Salir de la función si el presupuesto no está establecido
                }
                //si algo esta vacio tiene que escrib pedirle que escria 
                //script alert("hacked") /script, no sirve por que verifico que valores necesito a traves del input 
                if (pais1 === "" || pais2 === "" || fechaIda == "" || fechaVuelta == "" || presupuestoMoney == "") {
                    alert("Tienes que elegir dos destinos antes, y dos fechas, y un presupuesot  inicial .");
                } else {
                    calcularResultado();
                }
            });
        });

        function calcularResultado() {
            var fechaIda = $('#fechaIda').val();
            var fechaVuelta = $('#fechaVuelta').val();
            var presupuestoMoney = $('#presupuesto').val();
            // Convertir las fechas a objetos Date
            var dateIda = new Date(fechaIda);
            var dateVuelta = new Date(fechaVuelta);

            // Obtener el día de la semana para las fechas
            var diaSemanaIda = dateIda.toLocaleDateString('es-ES', { weekday: 'long' });

            // Verificar si es un día de semana o fin de semana
            var esDiaSemanaIda = dateIda.getDay() >= 1 && dateIda.getDay() <= 5;
            var diaFinde = dateIda.getDay() >= 6 && dateIda.getDay() <= 7;
            // Calcular precios
            var tipoDeDia;
            if (esDiaSemanaIda) {
                diaFinde = 'Has vuelto un dia festivo'
            }
            if (!esDiaSemanaIda) {
                diaFinde = ' Es dia de semana por eso es un poco mas barato '
                precioFinal = Math.random() * (presupuestoMoney - 300) + 300; // Precio entre 0 y 5 para días de semana
            }
            if (esDiaSemanaIda) {
                tipoDeDia = ' Es dia de semana por eso es un poco mas barato '
                precioFinal = Math.random() * (presupuestoMoney - 300) + 300; // Precio entre 0 y 5 para días de semana
            } //else {
            //     tipoDeDia = ' No es dia de semana por eso es mas carito '
            //     precioFinal = Math.random() * (presupuestoMoney - 300) + 250 // Precio entre 5 y 10 para fin de semana
            // }


            $('#precio').addClass('animated animate__bounceInUp').text('Fecha ida: ' + fechaIda + ' (' + diaSemanaIda + ')' +
                ' - ' + tipoDeDia +
                ' Precio: ' + precioFinal.toFixed(2) + ' Fecha vuelta: ' + diaFinde);

        }

        // fixed() redondena

    </script>

</body>

</html>